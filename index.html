<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="./dist/output.css" rel="stylesheet" />
    <link href="./index.css" rel="stylesheet" />

    <title>Frontend Mentor | Tic Tac Toe</title>
  </head>
  <body>
    <div class="bg-[#1A2A33] h-screen">
      <!-- FIRST PAGE -->
      <div
        id="first_page"
        class="first_page h-full flex flex-col items-center justify-center"
      >
        <div class="flex flex-row my-4">
          <img class="h-8 m-1" src="./assets/icon-x.svg" alt="x" />
          <img class="h-8 m-1" src="./assets/icon-o.svg" alt="o" />
        </div>
        <!-- CHOICE CONTAINER -->
        <div
          class="flex flex-col w-[327px] items-center justify-around bg-[#1F3641] drop-shadow-lg shadow-md rounded h-[205px]"
        >
          <h1 class="text-[#A8BFC9] font-bold">PICK PLAYER 1â€™S MARK</h1>
          <div
            class="choice_container bg-[#1A2A33] flex justify-center border rounded p-2 px-8"
          >
            <div
              id="choice_x"
              class="cursor-pointer px-4 rounded bg-[#9797977b]"
            >
              <img class="h-8 m-1" src="./assets/icon-x.svg" alt="x" />
            </div>
            <div id="choice_o" class="cursor-pointer">
              <img class="h-8 m-1" src="./assets/icon-o.svg" alt="o" />
            </div>
          </div>
          <p class="text-slate-500 text-sm">REMEMBER : X GOES FIRST</p>
        </div>

        <!-- USER OPTIONS -->
        <div class="flex flex-col my-8">
          <button
            id="new_game_cpu"
            class="bg-[#F2B137] m-2 px-20 py-3 font-bold rounded drop-shadow-md shadow-md hover:shadow-xl active:scale-90 transition duration-150"
          >
            NEW GAME (VS CPU)
          </button>
          <button
            id="new_game_player"
            class="bg-[#31C3BD] m-2 px-18 py-3 font-bold rounded drop-shadow-md shadow-md hover:shadow-xl active:scale-90 transition duration-150"
          >
            NEW GAME (VS PLAYER)
          </button>
        </div>
      </div>

      <!-- PAGE 2 -->
      <div
        id="second_page"
        class="hidden second_page h-full flex flex-col items-center md:justify-center"
      >
        <div
          class="second_page_header flex justify-between items-center w-96 px-6 my-5"
        >
          <div class="flex flex-row my-4">
            <img class="h-8 m-1" src="./assets/icon-x.svg" alt="x" />
            <img class="h-8 m-1" src="./assets/icon-o.svg" alt="o" />
          </div>
          <div
            class="mr-10 drop-shadow-md px-5 py-2 bg-[#1F3641] font-bold text-slate-500 rounded"
          >
            <span id="user_turn_display" class="user_turn_display">X</span>
            <span>TURN</span>
          </div>
          <button
            id="show_restart_modal"
            class="p-2 bg-[#979797] drop-shadow-sm rounded-md shadow-md hover:shadow-xl active:scale-90 transition duration-150"
          >
            <img src="./assets/icon-restart.svg" alt="restart" />
          </button>
        </div>

        <!-- BOX CONTAINER -->
        <div class="mt-10 grid grid-rows-3 grid-flow-col gap-6">
          <div
            id="1"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
          <div
            id="2"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
          <div
            id="3"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
          <div
            id="4"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
          <div
            id="5"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
          <div
            id="6"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
          <div
            id="7"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
          <div
            id="8"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
          <div
            id="9"
            class="box h-24 w-24 bg-[#1F3641] rounded-lg drop-shadow-md flex items-center justify-center"
          ></div>
        </div>

        <!-- RESULT CONTAINER -->
        <div class="flex flex-row justify-around my-10 px-4 w-96">
          <div
            class="user-result h-16 w-24 bg-[#31C3BD] flex flex-col justify-center items-center rounded-md shadow-md drop-shadow-md"
          >
            <div class="text-sm font-semibold">
              <span>X</span>
              <span id="x_user">(YOU)</span>
            </div>
            <span id="x__result" class="font-bold">O</span>
          </div>
          <div
            class="tie-result h-16 w-24 bg-[#979797] flex flex-col justify-center items-center rounded-md shadow-md drop-shadow-md"
          >
            <span class="text-sm font-semibold">TIES</span>
            <span id="tie__result" class="font-bold">O</span>
          </div>
          <div
            class="opponent-result h-16 w-24 bg-[#F2B137] flex flex-col justify-center items-center rounded-md shadow-md drop-shadow-md"
          >
            <div class="text-sm font-semibold">
              <span>O</span>
              <span id="o_user">(CPU)</span>
            </div>
            <span id="o__result" class="font-bold">O</span>
          </div>
        </div>
      </div>

      <!-- MODAL RESULT -->

      <!-- WIN MODAL CONTAINER -->
      <div
        id="win_modal_container"
        class="hidden win_modal_container bg-[#1F3641] w-full h-[228px] flex flex-col items-center justify-center fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
      >
        <p class="text-[#A8BFC9] text-sm font-bold">YOU WON!</p>
        <div class="flex flex-row text-[#31C3BD] text-2xl font-bold my-3">
          <span class="next_first_action mx-2">O</span>
          <p class="">TAKES THE ROUND</p>
        </div>
        <div>
          <button
            id="win_modal_quit"
            class="rounded px-4 py-2 drop-shadow-md shadow-sm font-bold mx-2 bg-[#A8BFC9]"
          >
            QUIT
          </button>
          <button
            id="win_modal_next"
            class="rounded px-4 py-2 drop-shadow-md shadow-sm font-bold mx-2 bg-[#F2B137]"
          >
            NEXT ROUND
          </button>
        </div>
      </div>

      <!-- RESTART MODAL -->
      <div
        id="restart_modal_container"
        class="hidden restart_modal_container bg-[#1F3641] w-full h-[228px] flex flex-col items-center justify-center fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
      >
        <h1 class="text-[#A8BFC9] text-2xl my-2 font-bold">RESTART GAME?</h1>

        <div>
          <button
            id="restart_modal_cancel"
            class="rounded px-4 py-2 drop-shadow-md shadow-sm font-bold mx-2 bg-[#A8BFC9]"
          >
            NO, CANCEL
          </button>
          <button
            id="restart_modal_confirm"
            class="rounded px-4 py-2 drop-shadow-md shadow-sm font-bold mx-2 bg-[#F2B137]"
          >
            YES, RESTART
          </button>
        </div>
      </div>

      <!-- TIE MODAL -->
      <div class="tie_modal_container">
        <div
          id="open_tie_modal_container"
          class="hidden fixed inset-0 flex items-center justify-center z-[999] bg-gray-900 bg-opacity-75"
        >
          <div
            class="flex flex-col justify-center p-3 items-center bg-[#1F3641] w-full h-[250px]"
          >
            <h1 class="text-[#A8BFC9] text-2xl my-5 font-bold">ROUND TIED</h1>

            <div>
              <button
                id="tie_modal_quit"
                class="rounded px-4 py-2 drop-shadow-md shadow-sm font-bold mx-2 bg-[#A8BFC9]"
              >
                QUIT
              </button>
              <button
                id="tie_modal_next_round"
                class="rounded px-4 py-2 drop-shadow-md shadow-sm font-bold mx-2 bg-[#F2B137]"
              >
                NEXT ROUND
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- LOST MODAL -->

      <div class="lost_modal_container">
        <div
          id="open_lost_modal_container"
          class="hidden fixed inset-0 flex items-center justify-center z-[999] bg-gray-900 bg-opacity-75"
        >
          <div
            class="flex flex-col justify-center p-3 items-center bg-[#1F3641] w-full h-[250px]"
          >
            <p class="text-[#A8BFC9] text-sm font-bold">OH NO, YOU LOST...</p>
            <div class="flex flex-row text-[#F2B137] text-2xl font-bold my-3">
              <span class="next_first_action mx-2">CPU</span>
              <p class="">TAKES THE ROUND</p>
            </div>
            <div>
              <button
                id="close_lost_modal"
                class="rounded px-4 py-2 drop-shadow-md shadow-sm font-bold mx-2 bg-[#A8BFC9]"
              >
                QUIT
              </button>
              <button
                id="next_round_lost_modal"
                class="rounded px-4 py-2 drop-shadow-md shadow-sm font-bold mx-2 bg-[#F2B137]"
              >
                NEXT ROUND
              </button>
            </div>
          </div>
        </div>
      </div>

      <!--  -->

      <!--  -->
    </div>

    <!-- <script>
      var CURRENT_PLAYER = "X";
      var OPPONENT = "O";
      var USER_X = "X";
      var USER_Y = "O";
      var MODE_OF_THE_GAME = null;
      var REMAINING_BOXES = [0, 1, 2, 3, 4, 5, 6, 7, 8];
      var RESULT = {
        X: 0,
        O: 0,
        TIE: 0,
      };

      const X = "./assets/icon-x.svg";
      const O = "./assets/icon-o.svg";

      const user_pick_x = document.getElementById("choice_x");
      const user_pick_o = document.getElementById("choice_o");
      const first_page = document.getElementById("first_page");
      const second_page = document.getElementById("second_page");

      const new_game_player = document.getElementById("new_game_player");
      const new_game_cpu = document.getElementById("new_game_cpu");
      const user_turn_display = document.getElementById("user_turn_display");

      const user__result = document.getElementById("user__result");
      const tie__result = document.getElementById("tie__result");
      const opponent__result = document.getElementById("opponent__result");

      const o_user = document.getElementById("o_user");
      const x_user = document.getElementById("x_user");
      const x__result = document.getElementById("x__result");
      const o__result = document.getElementById("o__result");

      //RESTART MODAL SECTION
      const show_restart_modal = document.getElementById("show_restart_modal");
      const restart_modal_container = document.getElementById(
        "restart_modal_container"
      );

      const restart_modal_cancel = document.getElementById(
        "restart_modal_cancel"
      );
      const restart_modal_confirm = document.getElementById(
        "restart_modal_confirm"
      );

      //WIN MODAL SECTION
      const win_modal_container = document.getElementById(
        "win_modal_container"
      );
      const win_modal_quit = document.getElementById("win_modal_quit");
      const win_modal_next = document.getElementById("win_modal_next");

      //TIE MODAL SECTION
      const open_tie_modal_container = document.getElementById(
        "open_tie_modal_container"
      );
      const tie_modal_quit = document.getElementById("tie_modal_quit");
      const tie_modal_next_round = document.getElementById(
        "tie_modal_next_round"
      );

      //LOST MODAL

      const open_lost_modal_container = document.getElementById(
        "open_lost_modal_container"
      );
      const close_lost_modal = document.getElementById("close_lost_modal");
      const next_round_lost_modal = document.getElementById(
        "next_round_lost_modal"
      );

      const WINNING_COMBINATION = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 4, 8],
        [2, 4, 6],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
      ];

      const user_combination = [];
      const cpu_combination = [];
      const second_user = [];

      const clearData = () => {
        //CLEAR THE BOARD
        const boxes = document.querySelectorAll(".box");
        boxes.forEach((box) => {
          box.innerHTML = "";
        });

        //RESET THE REMAINING BOXES
        REMAINING_BOXES = [0, 1, 2, 3, 4, 5, 6, 7, 8];

        //RESET THE USER COMBINATION
        user_combination.length = 0;
        cpu_combination.length = 0;
        second_user.length = 0;

        //RESET RESULT VARIABLE
        RESULT.X = 0;
        RESULT.O = 0;
        RESULT.TIE = 0;

        o__result.innerHTML = 0;
        x__result.innerHTML = 0;
        tie__result.innerHTML = 0;
      };

      user_pick_x.addEventListener("click", () => {
        // Update the class and global variable for user's X choice
        user_pick_x.classList.add("px-4", "rounded", "bg-[#9797977b]");
        user_pick_o.classList.remove("px-4", "rounded", "bg-[#9797977b]");

        CURRENT_PLAYER = USER_X;
        console.log(CURRENT_PLAYER);
      });

      user_pick_o.addEventListener("click", () => {
        // Update the class and global variable for user's O choice
        user_pick_o.classList.add("px-4", "rounded", "bg-[#9797977b]");
        user_pick_x.classList.remove("px-4", "rounded", "bg-[#9797977b]");

        CURRENT_PLAYER = USER_Y;
        console.log(CURRENT_PLAYER);
      });

      //RESTART MODAL
      show_restart_modal.addEventListener("click", () => {
        restart_modal_container.classList.remove("hidden");
      });

      //CLOSE THE CANCEL MODAL
      restart_modal_cancel.addEventListener("click", () => {
        restart_modal_container.classList.add("hidden");
      });

      //RESTART THE GAME
      restart_modal_confirm.addEventListener("click", () => {
        restart_modal_container.classList.add("hidden");

        //CLEAR THE BOARD
        const boxes = document.querySelectorAll(".box");
        boxes.forEach((box) => {
          box.innerHTML = "";
        });

        //RESET THE REMAINING BOXES
        REMAINING_BOXES = [0, 1, 2, 3, 4, 5, 6, 7, 8];

        //RESET THE USER COMBINATION
        user_combination.length = 0;
        cpu_combination.length = 0;
        second_user.length = 0;
      });

      //WIN MODAL SECTION
      win_modal_quit.addEventListener("click", () => {
        win_modal_container.classList.add("hidden");
        first_page.classList.remove("hidden");
        second_page.classList.add("hidden");

        clearData();
      });

      win_modal_next.addEventListener("click", () => {
        win_modal_container.classList.add("hidden");

        //CLEAR THE BOARD
        const boxes = document.querySelectorAll(".box");
        boxes.forEach((box) => {
          box.innerHTML = "";
        });

        //RESET THE REMAINING BOXES
        REMAINING_BOXES = [0, 1, 2, 3, 4, 5, 6, 7, 8];

        //RESET THE USER COMBINATION
        user_combination.length = 0;
        cpu_combination.length = 0;
        second_user.length = 0;
      });

      //GAME MODE SELECTION

      //TIE MODAL SELECTION

      tie_modal_quit.addEventListener("click", () => {
        //CLOSE THE TIE MODAL
        open_tie_modal_container.classList.add("hidden");
        second_page.classList.add("hidden");
        first_page.classList.remove("hidden");

        //CLEAR DATA
        clearData();
      });

      tie_modal_next_round.addEventListener("click", () => {
        //CLOSE THE TIE MODAL
        open_tie_modal_container.classList.add("hidden");

        //CLEAR THE BOARD
        const boxes = document.querySelectorAll(".box");
        boxes.forEach((box) => {
          box.innerHTML = "";
        });

        //RESET THE REMAINING BOXES
        REMAINING_BOXES = [0, 1, 2, 3, 4, 5, 6, 7, 8];

        //RESET THE USER COMBINATION
        user_combination.length = 0;
        cpu_combination.length = 0;
        second_user.length = 0;
      });

      //LOST MODAL CONTAINER
      close_lost_modal.addEventListener("click", () => {
        //HIDE THE LOST MODAL
        open_lost_modal_container.classList.add("hidden");

        //GO TO FIRST PAGE
        second_page.classList.add("hidden");
        first_page.classList.remove("hidden");
        //HIDE THE SECOND PAGE

        //CLEAR DATA
        clearData();
      });

      next_round_lost_modal.addEventListener("click", () => {
        //HIDE THE LOST MODAL
        open_lost_modal_container.classList.add("hidden");

        //CLEAR THE BOARD
        const boxes = document.querySelectorAll(".box");
        boxes.forEach((box) => {
          box.innerHTML = "";
        });

        //RESET THE REMAINING BOXES
        REMAINING_BOXES = [0, 1, 2, 3, 4, 5, 6, 7, 8];

        //RESET THE USER COMBINATION
        user_combination.length = 0;
        cpu_combination.length = 0;
        second_user.length = 0;
      });

      //PLAYER VS PLAYER
      new_game_player.addEventListener("click", () => {
        // Update the class and global variable for user's X choice

        //add hidden to the first page modal
        first_page.classList.add("hidden");
        //remove hidden to the second page modal
        second_page.classList.remove("hidden");

        //GET CURRENT_PLAYER, IF USER IS X, set x_user to user then o_user to opponent
        if (CURRENT_PLAYER === USER_X) {
          x_user.textContent = "YOU";
          o_user.textContent = "OPPONENT";
        } else {
          x_user.textContent = "OPPONENT";
          o_user.textContent = "YOU";
        }

        MODE_OF_THE_GAME = "PVP";
      });

      //PLAYER VS CPU
      new_game_cpu.addEventListener("click", () => {
        //add hidden to the first page modal
        first_page.classList.add("hidden");
        //remove hidden to the second page modal
        second_page.classList.remove("hidden");

        MODE_OF_THE_GAME = "PVC";

        //IF CURRENT PLAYER IS X, DO NOTHING, IF CURRENT PLAYER IS O, CPU SHOULD FIRST PLAY AND PICK A RANDOM BOX
        if (CURRENT_PLAYER === USER_X) {
          //IF  PLAYER IS X, DO NOTHING
        } else {
          //LET THE CPU PICK A RANDOM BOX SINCE HE IS X
          setTimeout(() => {
            const random_box = getRandomNumber();
            //ADD THE RANDOM BOX TO THE CPU COMBINATION
            cpu_combination.push(random_box);

            // Remove the index from the remaining boxes array
            REMAINING_BOXES.splice(REMAINING_BOXES.indexOf(random_box), 1);
            console.log(REMAINING_BOXES);

            //update the box with the CPU choice
            boxes[random_box].innerHTML = `<img src="${X}" alt="X" />`;
            //UPDATING THE NEXT TURN DISPLAY
            user_turn_display.innerHTML = "O";
            checkCPUWin(WINNING_COMBINATION, cpu_combination);
          }, 1000);

          x_user.textContent = "OPPONENT";
          o_user.textContent = "YOU";
        }
      });

      //GET A RANDOM NUMBER FROM THE REMAINING BOXES
      const getRandomNumber = () => {
        const random_box = Math.floor(Math.random() * REMAINING_BOXES.length);
        console.log("generated random number: ", REMAINING_BOXES[random_box]);

        return REMAINING_BOXES[random_box];
      };

      // BOARD SELECTION
      // Define the box elements
      const boxes = document.querySelectorAll(".box");

      const checkUserWin = (combination, current_combination) => {
        //CHECK IF CURRENT COMBINATIONS MATCHES THE WINNING COMBINATION
        for (let i = 0; i < combination.length; i++) {
          if (
            combination[i].every((item) => current_combination.includes(item))
          ) {
            console.log("PLAYER WIN");
            return true;
          }
        }
      };

      const checkCPUWin = (combination, current_combination) => {
        //CHECK IF CURRENT COMBINATIONS MATCHES THE WINNING COMBINATION
        for (let i = 0; i < combination.length; i++) {
          if (
            combination[i].every((item) => current_combination.includes(item))
          ) {
            console.log("OTHER PLAYER WIN");
            return true;
          }
        }
      };

      const checkDraw = () => {
        // Check if all the boxes are filled
        return [...boxes].every((box) => {
          return box.innerHTML !== "";
        });
      };

      const checkResults = (combination, user_combination, cpu_combination) => {
        //CHECK IF CURRENT COMBINATIONS MATCHES THE WINNING COMBINATION
        for (let i = 0; i < combination.length; i++) {
          if (combination[i].every((item) => user_combination.includes(item))) {
            console.log("PLAYER WIN");
            return 1;
          }
        }

        //check if the cpu wins
        for (let i = 0; i < combination.length; i++) {
          if (combination[i].every((item) => cpu_combination.includes(item))) {
            console.log("OTHER PLAYER WIN");
            return 2;
          }
        }

        //check if it is a draw
        if (checkDraw()) {
          console.log("DRAW");
          return 3;
        }

        return 0;
      };

      // Add event listeners to the boxes
      boxes.forEach((box, index) => {
        box.addEventListener("click", () => {
          //CHECK IF THE GAME IS PVP OR PVC
          if (MODE_OF_THE_GAME === "PVC") {
            if (box.innerHTML === "") {
              if (CURRENT_PLAYER === "X") {
                box.innerHTML = '<img src="./assets/icon-x.svg" alt="x" />';
                user_turn_display.innerHTML = "O";

                // Add the index to the user combination array
                user_combination.push(index);
                // Remove the index from the remaining boxes array
                REMAINING_BOXES.splice(REMAINING_BOXES.indexOf(index), 1);

                const result = checkResults(
                  WINNING_COMBINATION,
                  user_combination,
                  cpu_combination
                );

                console.log("result: ", result);

                if (result === 0) {
                  //set timeout to make the CPU choice after 2 second
                  setTimeout(() => {
                    const random_box = getRandomNumber();
                    //ADD THE RANDOM BOX TO THE CPU COMBINATION
                    cpu_combination.push(random_box);

                    // Remove the index from the remaining boxes array
                    REMAINING_BOXES.splice(
                      REMAINING_BOXES.indexOf(random_box),
                      1
                    );
                    console.log("REMAINING_BOXES", REMAINING_BOXES);

                    //update the box with the CPU choice
                    boxes[random_box].innerHTML = `<img src="${O}" alt="O" />`;

                    const checkCpuResult = checkCPUWin(
                      WINNING_COMBINATION,
                      cpu_combination
                    );

                    //IF CPU WIN, SHOW I LOST
                    if (checkCpuResult) {
                      //update the result
                      RESULT.O++;
                      o__result.innerHTML = RESULT.O;

                      setTimeout(() => {
                        //show lost  modal
                        open_lost_modal_container.classList.remove("hidden");
                      }, 1500);
                    }

                    //UPDATING THE NEXT TURN DISPLAY
                    user_turn_display.innerHTML = "X";
                    // checkCPUWin(WINNING_COMBINATION, cpu_combination);
                  }, 1000);
                }

                //Check if the user or cpu win, then update the RESULT variable, if x win, add 1 to the x score, if o win, add 1 to the o score, if draw, add 1 to the draw score
                if (result === 1) {
                  // RESULT = "X";
                  RESULT.X++;

                  x__result.innerHTML = RESULT.X;
                  console.log(RESULT.X);

                  win_modal_container.classList.remove("hidden");

                  //SHOW WIN MODAL

                  // user__result.innerHTML = RESULT.X;
                } else if (result === 2) {
                  // RESULT = "O";
                  RESULT.O++;
                  o__result.innerHTML = RESULT.O;
                  // opponent__result.innerHTML = RESULT.O;
                } else if (result === 3) {
                  // RESULT = "DRAW";
                  RESULT.TIE++;
                  tie__result.innerHTML = RESULT.TIE;

                  //SHOW TIE MODAL
                  open_tie_modal_container.classList.remove("hidden");
                }
              } else {
                //MODE OF GAME PVC, USER IS O

                box.innerHTML = '<img src="./assets/icon-o.svg" alt="o" />';
                user_turn_display.innerHTML = "X";

                // Add the index to the user combination array
                user_combination.push(index);
                // Remove the index from the remaining boxes array
                REMAINING_BOXES.splice(REMAINING_BOXES.indexOf(index), 1);

                const result = checkResults(
                  WINNING_COMBINATION,
                  user_combination,
                  cpu_combination
                );

                console.log("result: ", result);

                if (result === 0) {
                  //set timeout to make the CPU choice after 2 second
                  setTimeout(() => {
                    const random_box = getRandomNumber();
                    //ADD THE RANDOM BOX TO THE CPU COMBINATION
                    cpu_combination.push(random_box);

                    // Remove the index from the remaining boxes array
                    REMAINING_BOXES.splice(
                      REMAINING_BOXES.indexOf(random_box),
                      1
                    );
                    console.log("REMAINING_BOXES", REMAINING_BOXES);

                    //update the box with the CPU choice
                    boxes[random_box].innerHTML = `<img src="${X}" alt="X" />`;
                    //UPDATING THE NEXT TURN DISPLAY
                    user_turn_display.innerHTML = "O";
                    const checkCpuResult = checkCPUWin(
                      WINNING_COMBINATION,
                      cpu_combination
                    );
                    console.log("check cpu:", checkCpuResult);

                    //IF CPU WIN, SHOW I LOST
                    if (checkCpuResult) {
                      //update the result
                      RESULT.O++;
                      o__result.innerHTML = RESULT.O;

                      setTimeout(() => {
                        //show lost  modal
                        open_lost_modal_container.classList.remove("hidden");
                      }, 1500);
                    }
                  }, 1000);
                }

                //Check if the user or cpu win, then update the RESULT variable, if x win, add 1 to the x score, if o win, add 1 to the o score, if draw, add 1 to the draw score
                if (result === 1) {
                  //USER WINNER
                  RESULT.O++;

                  o__result.innerHTML = RESULT.O;
                  console.log(RESULT.O);

                  win_modal_container.classList.remove("hidden");

                  //SHOW WIN MODAL

                  // user__result.innerHTML = RESULT.X;
                } else if (result === 2) {
                  // RESULT = "O";
                  RESULT.X++;
                  x__result.innerHTML = RESULT.X;
                  // opponent__result.innerHTML = RESULT.O;
                } else if (result === 3) {
                  // RESULT = "DRAW";
                  RESULT.TIE++;
                  tie__result.innerHTML = RESULT.TIE;

                  //SHOW TIE MODAL
                  open_tie_modal_container.classList.remove("hidden");
                }
              }
            }
          } else if (MODE_OF_THE_GAME === "PVP") {
            // if (box.innerHTML === "") {
            //   if (CURRENT_PLAYER === "X") {
            //     box.innerHTML = '<img src="./assets/icon-x.svg" alt="x" />';
            //     user_turn_display.innerHTML = "O";
            //     // Add the index to the user combination array
            //     user_combination.push(index);
            //     checkWin(WINNING_COMBINATION, user_combination);
            //   } else {
            //     box.innerHTML = '<img src="./assets/icon-o.svg" alt="o" />';
            //     user_turn_display.innerHTML = "X";
            //     // Add the index to the cpu combination array
            //     cpu_combination.push(index);
            //     checkWin(WINNING_COMBINATION, cpu_combination);
            //   }
            //   // Switch players
            //   CURRENT_PLAYER = CURRENT_PLAYER === "X" ? "O" : "X";
            // }
          }
        });
      });
    </script> -->
    <script src="./app.js"></script>
  </body>
</html>
